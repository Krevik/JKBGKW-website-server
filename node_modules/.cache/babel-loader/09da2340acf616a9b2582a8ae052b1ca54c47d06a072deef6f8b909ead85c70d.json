{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { appStore } from \"../redux/store\";\nimport { authenticationActions } from \"../redux/slices/authenticationSlice\";\nimport { useSelector } from \"react-redux\";\nimport axios from \"axios\";\nvar STEAM_API_KEY = \"F9B6127DDEB6AF27EA0D64F1E5C642A4\";\nexport var steamAPIService = {\n  useSteamAuthService: _s(function useSteamAuthService() {\n    _s();\n    useEffect(function () {\n      if (window.location.href.includes(\"openid\")) {\n        var search = window.location.search.substring(1);\n        var urlObj = JSON.parse('{\"' + decodeURI(search).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}');\n        var getUserId = function getUserId(response) {\n          var str = response[\"openid.claimed_id\"];\n          var res = decodeURIComponent(str);\n          var propsArr = res.split(\"/\");\n          console.log(propsArr);\n          return propsArr[propsArr.length - 1];\n        };\n        var userId = getUserId(urlObj);\n        userId && appStore.dispatch(authenticationActions.setUserID(userId));\n        window.location.href = \"/\";\n      }\n    }, []);\n  }, \"OD7bBpZva5O2jO+Puf00hKivP7c=\"),\n  useUserDataFetcher: _s2(function useUserDataFetcher() {\n    _s2();\n    var userID = useSelector(function (state) {\n      return state.authenticationReducer.userID;\n    });\n    useEffect(function () {\n      if (userID) {\n        var fetchURL = \"https://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=\".concat(STEAM_API_KEY, \"&steamids=\").concat(userID);\n        axios.get(fetchURL, {\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n          }\n        }).then(function (response) {\n          console.log(response);\n        });\n      }\n    }, [userID]);\n  }, \"oXPtMCJF6GpIqXG+1pqjZlfG5rs=\", false, function () {\n    return [useSelector];\n  })\n};","map":{"version":3,"names":["useEffect","appStore","authenticationActions","useSelector","axios","STEAM_API_KEY","steamAPIService","useSteamAuthService","window","location","href","includes","search","substring","urlObj","JSON","parse","decodeURI","replace","getUserId","response","str","res","decodeURIComponent","propsArr","split","console","log","length","userId","dispatch","setUserID","useUserDataFetcher","userID","state","authenticationReducer","fetchURL","get","headers","Accept","then"],"sources":["C:/Users/admin/Downloads/react-express-starter-master/src/services/steamAPIService.ts"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { AppState, appStore } from \"../redux/store\";\r\nimport { authenticationActions } from \"../redux/slices/authenticationSlice\";\r\nimport { useSelector } from \"react-redux\";\r\nimport axios from \"axios\";\r\n\r\nconst STEAM_API_KEY = \"F9B6127DDEB6AF27EA0D64F1E5C642A4\";\r\n\r\nexport const steamAPIService = {\r\n\tuseSteamAuthService: () => {\r\n\t\tuseEffect(() => {\r\n\t\t\tif (window.location.href.includes(\"openid\")) {\r\n\t\t\t\tconst search = window.location.search.substring(1);\r\n\r\n\t\t\t\tconst urlObj = JSON.parse(\r\n\t\t\t\t\t'{\"' +\r\n\t\t\t\t\t\tdecodeURI(search)\r\n\t\t\t\t\t\t\t.replace(/\"/g, '\\\\\"')\r\n\t\t\t\t\t\t\t.replace(/&/g, '\",\"')\r\n\t\t\t\t\t\t\t.replace(/=/g, '\":\"') +\r\n\t\t\t\t\t\t'\"}'\r\n\t\t\t\t);\r\n\r\n\t\t\t\tconst getUserId = (response) => {\r\n\t\t\t\t\tconst str = response[\"openid.claimed_id\"];\r\n\t\t\t\t\tconst res = decodeURIComponent(str);\r\n\t\t\t\t\tconst propsArr = res.split(\"/\");\r\n\t\t\t\t\tconsole.log(propsArr);\r\n\r\n\t\t\t\t\treturn propsArr[propsArr.length - 1];\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst userId = getUserId(urlObj);\r\n\t\t\t\tuserId && appStore.dispatch(authenticationActions.setUserID(userId));\r\n\t\t\t\twindow.location.href = \"/\";\r\n\t\t\t}\r\n\t\t}, []);\r\n\t},\r\n\tuseUserDataFetcher: () => {\r\n\t\tconst userID = useSelector(\r\n\t\t\t(state: AppState) => state.authenticationReducer.userID\r\n\t\t);\r\n\r\n\t\tuseEffect(() => {\r\n\t\t\tif (userID) {\r\n\t\t\t\tconst fetchURL = `https://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=${STEAM_API_KEY}&steamids=${userID}`;\r\n\t\t\t\taxios\r\n\t\t\t\t\t.get(fetchURL, {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\t\t\t\"Content-Type\":\r\n\t\t\t\t\t\t\t\t\"application/x-www-form-urlencoded; charset=UTF-8\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((response) => {\r\n\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, [userID]);\r\n\t},\r\n};\r\n"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAAmBC,QAAQ,QAAQ,gBAAgB;AACnD,SAASC,qBAAqB,QAAQ,qCAAqC;AAC3E,SAASC,WAAW,QAAQ,aAAa;AACzC,OAAOC,KAAK,MAAM,OAAO;AAEzB,IAAMC,aAAa,GAAG,kCAAkC;AAExD,OAAO,IAAMC,eAAe,GAAG;EAC9BC,mBAAmB,KAAE,+BAAM;IAAA;IAC1BP,SAAS,CAAC,YAAM;MACf,IAAIQ,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,QAAQ,CAAC,QAAQ,CAAC,EAAE;QAC5C,IAAMC,MAAM,GAAGJ,MAAM,CAACC,QAAQ,CAACG,MAAM,CAACC,SAAS,CAAC,CAAC,CAAC;QAElD,IAAMC,MAAM,GAAGC,IAAI,CAACC,KAAK,CACxB,IAAI,GACHC,SAAS,CAACL,MAAM,CAAC,CACfM,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,CACpBA,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,CACpBA,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,GACtB,IAAI,CACL;QAED,IAAMC,SAAS,GAAG,SAAZA,SAAS,CAAIC,QAAQ,EAAK;UAC/B,IAAMC,GAAG,GAAGD,QAAQ,CAAC,mBAAmB,CAAC;UACzC,IAAME,GAAG,GAAGC,kBAAkB,CAACF,GAAG,CAAC;UACnC,IAAMG,QAAQ,GAAGF,GAAG,CAACG,KAAK,CAAC,GAAG,CAAC;UAC/BC,OAAO,CAACC,GAAG,CAACH,QAAQ,CAAC;UAErB,OAAOA,QAAQ,CAACA,QAAQ,CAACI,MAAM,GAAG,CAAC,CAAC;QACrC,CAAC;QAED,IAAMC,MAAM,GAAGV,SAAS,CAACL,MAAM,CAAC;QAChCe,MAAM,IAAI5B,QAAQ,CAAC6B,QAAQ,CAAC5B,qBAAqB,CAAC6B,SAAS,CAACF,MAAM,CAAC,CAAC;QACpErB,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;MAC3B;IACD,CAAC,EAAE,EAAE,CAAC;EACP,CAAC;EACDsB,kBAAkB,MAAE,8BAAM;IAAA;IACzB,IAAMC,MAAM,GAAG9B,WAAW,CACzB,UAAC+B,KAAe;MAAA,OAAKA,KAAK,CAACC,qBAAqB,CAACF,MAAM;IAAA,EACvD;IAEDjC,SAAS,CAAC,YAAM;MACf,IAAIiC,MAAM,EAAE;QACX,IAAMG,QAAQ,mFAA4E/B,aAAa,uBAAa4B,MAAM,CAAE;QAC5H7B,KAAK,CACHiC,GAAG,CAACD,QAAQ,EAAE;UACdE,OAAO,EAAE;YACRC,MAAM,EAAE,kBAAkB;YAC1B,cAAc,EACb;UACF;QACD,CAAC,CAAC,CACDC,IAAI,CAAC,UAACpB,QAAQ,EAAK;UACnBM,OAAO,CAACC,GAAG,CAACP,QAAQ,CAAC;QACtB,CAAC,CAAC;MACJ;IACD,CAAC,EAAE,CAACa,MAAM,CAAC,CAAC;EACb,CAAC;IAAA,QApBe9B,WAAW;EAAA;AAqB5B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}